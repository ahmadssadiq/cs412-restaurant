{% extends 'mini_fb/base.html' %}

{% block content %}
<h2>Create Profile</h2>
<form method="post">
    {% csrf_token %}
    <fieldset>
        <legend>User Account Details</legend>
        {{ user_creation_form.as_p }} <!-- Ensure these fields are rendered -->
    </fieldset>
    <fieldset>
        <legend>Profile Details</legend>
        {{ form.as_p }}
    </fieldset>

    {% if form.errors or user_creation_form.errors %}
    <div class="alert alert-danger">
        <strong>Error:</strong> Please correct the following issues.
        <ul>
            {% for error in form.non_field_errors %}
            <li>{{ error }}</li>
            {% endfor %}
            {% for error in user_creation_form.non_field_errors %}
            <li>{{ error }}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    {% if error %}
    <div class="alert alert-danger">
        <strong>Error:</strong> {{ error }}
    </div>
    {% endif %}

    <button type="submit">Create Profile</button>
</form>
{% endblock %}